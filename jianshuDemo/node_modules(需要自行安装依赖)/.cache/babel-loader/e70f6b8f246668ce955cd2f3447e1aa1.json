{"ast":null,"code":"import _classCallCheck from \"/Users/mac/Desktop/ReactJsDemo/jianshu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mac/Desktop/ReactJsDemo/jianshu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mac/Desktop/ReactJsDemo/jianshu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mac/Desktop/ReactJsDemo/jianshu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mac/Desktop/ReactJsDemo/jianshu/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mac/Desktop/ReactJsDemo/jianshu/src/common/header/index.js\";\nimport React, { Component } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport { HeaderWrapper, Logo, Nav, NavItem, NavSearch, Addition, Button, SearchWrapper, SearchInfo, SearchInfoTitle, SearchInfoSwitch, SearchInfoList, SearchInfoItem } from './style.js';\nimport { Link } from 'react-router-dom';\nimport { actionCreators } from './store';\nimport { actionCreators as loginActionCreators } from '../../pages/login/store';\n\nvar Header =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Header, _Component);\n\n  function Header() {\n    _classCallCheck(this, Header);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Header).apply(this, arguments));\n  }\n\n  _createClass(Header, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          focused = _this$props.focused,\n          list = _this$props.list,\n          handleInputFocus = _this$props.handleInputFocus,\n          handleInputBlur = _this$props.handleInputBlur,\n          login = _this$props.login,\n          logout = _this$props.logout;\n      return React.createElement(HeaderWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 16\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18\n        },\n        __self: this\n      })), React.createElement(Nav, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, React.createElement(NavItem, {\n        className: \"left active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }, \"\\u9996\\u9875\"), React.createElement(NavItem, {\n        className: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, \"\\u4E0B\\u8F7DApp\"), login ? React.createElement(NavItem, {\n        onClick: logout,\n        className: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, \"\\u9000\\u51FA\") : React.createElement(Link, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(NavItem, {\n        className: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, \"\\u767B\\u9646\")), React.createElement(NavItem, {\n        className: \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"iconfont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, \"\\uE636\")), React.createElement(SearchWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(CSSTransition, {\n        in: focused,\n        timeout: 200,\n        classNames: \"slide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      }, React.createElement(NavSearch, {\n        className: focused ? 'focused' : '',\n        onFocus: function onFocus() {\n          return handleInputFocus(list);\n        },\n        onBlur: handleInputBlur,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      })), React.createElement(\"i\", {\n        className: focused ? 'focused iconfont zoom' : 'iconfont zoom',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"\\uE6E4\"), this.getListArea(focused))), React.createElement(Addition, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/write\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(Button, {\n        className: \"writting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"iconfont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"\\uE602\"), \"\\u5199\\u6587\\u7AE0\")), React.createElement(Button, {\n        className: \"reg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"\\u6CE8\\u518C\")));\n    }\n  }, {\n    key: \"getListArea\",\n    value: function getListArea() {\n      var _this = this;\n\n      var _this$props2 = this.props,\n          focused = _this$props2.focused,\n          list = _this$props2.list,\n          page = _this$props2.page,\n          mouseIn = _this$props2.mouseIn,\n          totalPage = _this$props2.totalPage,\n          handleMouseEnter = _this$props2.handleMouseEnter,\n          handleMouseLeave = _this$props2.handleMouseLeave,\n          handleChangePage = _this$props2.handleChangePage;\n      var varList = list.toJS();\n      var pageList = [];\n      var countNum = 9;\n\n      if (varList.length) {\n        for (var i = (page - 1) * countNum; i < page * countNum; i++) {\n          pageList.push(React.createElement(SearchInfoItem, {\n            key: varList[i],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, \" \", varList[i], \" \"));\n        }\n      }\n\n      if (focused || mouseIn) {\n        return React.createElement(SearchInfo, {\n          onMouseEnter: handleMouseEnter,\n          onMouseLeave: handleMouseLeave,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(SearchInfoTitle, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \"\\u70ED\\u95E8\\u641C\\u7D22\", React.createElement(SearchInfoSwitch, {\n          onClick: function onClick() {\n            return handleChangePage(page, totalPage, _this.spinIcon);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          ref: function ref(icon) {\n            _this.spinIcon = icon;\n          },\n          className: \"iconfont spin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"\\uE851\"), \"\\u6362\\u4E00\\u6279\")), React.createElement(SearchInfoList, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, pageList));\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  // immutable中不可以用 点语法\n  return {\n    // focused: state.header.focused\n    /// 这样调 数据生成的方式不统一\n    focused: state.get('header').get('focused'),\n    list: state.getIn(['header', 'list']),\n    page: state.getIn(['header', 'page']),\n    mouseIn: state.getIn(['header', 'mouseIn']),\n    totalPage: state.getIn(['header', 'totalPage']),\n    login: state.getIn(['login', 'login']) // 等价写法: \n    // focused: state.getIn(['header', 'focused'])\n\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    handleInputFocus: function handleInputFocus(list) {\n      if (list.size === 0) {\n        dispatch(actionCreators.getList());\n      }\n\n      dispatch(actionCreators.searchFoucs());\n    },\n    handleInputBlur: function handleInputBlur() {\n      dispatch(actionCreators.searchBlur());\n    },\n    handleMouseEnter: function handleMouseEnter() {\n      dispatch(actionCreators.mouseEnter());\n    },\n    handleMouseLeave: function handleMouseLeave() {\n      dispatch(actionCreators.mouseLeave());\n    },\n    handleChangePage: function handleChangePage(page, totalPage, spin) {\n      var originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n\n      if (originAngle) {\n        originAngle = parseInt(originAngle);\n      } else {\n        originAngle = 0;\n      }\n\n      spin.style.transform = 'ratate(' + (originAngle + 360) + 'deg)';\n\n      if (page < totalPage) {\n        dispatch(actionCreators.changePageList(page + 1));\n      } else {\n        dispatch(actionCreators.changePageList(1));\n      }\n    },\n    logout: function logout() {\n      dispatch(loginActionCreators.logout());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","map":{"version":3,"sources":["/Users/mac/Desktop/ReactJsDemo/jianshu/src/common/header/index.js"],"names":["React","Component","CSSTransition","connect","HeaderWrapper","Logo","Nav","NavItem","NavSearch","Addition","Button","SearchWrapper","SearchInfo","SearchInfoTitle","SearchInfoSwitch","SearchInfoList","SearchInfoItem","Link","actionCreators","loginActionCreators","Header","props","focused","list","handleInputFocus","handleInputBlur","login","logout","getListArea","page","mouseIn","totalPage","handleMouseEnter","handleMouseLeave","handleChangePage","varList","toJS","pageList","countNum","length","i","push","spinIcon","icon","mapStateToProps","state","get","getIn","mapDispatchToProps","dispatch","size","getList","searchFoucs","searchBlur","mouseEnter","mouseLeave","spin","originAngle","style","transform","replace","parseInt","changePageList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { CSSTransition} from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport {\n    HeaderWrapper, Logo, Nav, NavItem, NavSearch, Addition, Button, SearchWrapper, SearchInfo, SearchInfoTitle, SearchInfoSwitch, SearchInfoList, SearchInfoItem\n} from './style.js';\n\nimport { Link } from 'react-router-dom';\nimport { actionCreators }from './store';\nimport { actionCreators as loginActionCreators }from '../../pages/login/store';\n\nclass Header extends Component{\n    render(){\n        const {focused, list, handleInputFocus, handleInputBlur, login, logout } = this.props;\n        return (\n            <HeaderWrapper>\n                <Link to='/'>\n                    <Logo />\n                </Link>\n                <Nav>\n                    <NavItem className='left active'>首页</NavItem>\n                    <NavItem className='left'>下载App</NavItem>\n                    { \n                        login ? \n                            <NavItem onClick={logout} className='right'>退出</NavItem> : \n                            <Link to='/login'><NavItem className='right'>登陆</NavItem></Link>\n                    }\n                    <NavItem className='right'>\n                        <i className='iconfont'>&#xe636;</i>\n                    </NavItem>\n                    <SearchWrapper>\n                        <CSSTransition \n                            in={focused}\n                            timeout={200}\n                            classNames=\"slide\"\n                        >\n                            <NavSearch className={focused ? 'focused': ''}\n                                onFocus={() => handleInputFocus(list)}\n                                onBlur={handleInputBlur}\n                            ></NavSearch>\n                        </CSSTransition>\n                        <i className={focused ? 'focused iconfont zoom': 'iconfont zoom'}>&#xe6e4;</i>\n                        {this.getListArea(focused)}\n                    </SearchWrapper>\n                </Nav>\n                <Addition>\n                    <Link to='/write'>\n                        <Button className='writting'>\n                            <i className='iconfont'>&#xe602;</i>\n                            写文章\n                        </Button>\n                    </Link>\n                    <Button className='reg'>注册</Button>\n                </Addition>\n            </HeaderWrapper>\n        )\n    }\n\n    getListArea() {\n        const {focused, list, page, mouseIn, totalPage, handleMouseEnter, handleMouseLeave, handleChangePage} = this.props;\n        const varList = list.toJS();\n        const pageList = []\n        let countNum = 9\n        if(varList.length){\n            for (let i = (page - 1)*countNum; i< page*countNum; i++){\n                pageList.push(\n                    <SearchInfoItem key={varList[i]}> {varList[i]} </SearchInfoItem>\n                )\n            }\n        }\n        \n        if (focused || mouseIn){\n            return (\n                <SearchInfo \n                    onMouseEnter={handleMouseEnter}\n                    onMouseLeave={handleMouseLeave}\n                    >\n                    <SearchInfoTitle>\n                        热门搜索\n                        <SearchInfoSwitch onClick={() => handleChangePage(page, totalPage, this.spinIcon)}>\n                            <i ref={(icon) => {this.spinIcon = icon}} className='iconfont spin'>&#xe851;</i>\n                            换一批\n                        </SearchInfoSwitch>\n                    </SearchInfoTitle>\n                    <SearchInfoList>\n                        {pageList}\n                    </SearchInfoList>\n                </SearchInfo>\n            )\n        }else{\n            return null;\n        }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    // immutable中不可以用 点语法\n    return {\n        // focused: state.header.focused\n        /// 这样调 数据生成的方式不统一\n        focused: state.get('header').get('focused'),\n        list: state.getIn(['header', 'list']),\n        page: state.getIn(['header', 'page']),\n        mouseIn: state.getIn(['header', 'mouseIn']),\n        totalPage: state.getIn(['header', 'totalPage']),\n        login: state.getIn(['login', 'login'])\n        // 等价写法: \n        // focused: state.getIn(['header', 'focused'])\n    }\n}\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        handleInputFocus(list){\n            if(list.size === 0){\n                dispatch(actionCreators.getList())\n            }\n            dispatch(actionCreators.searchFoucs())\n        },\n        handleInputBlur(){\n            dispatch(actionCreators.searchBlur())\n        },\n        handleMouseEnter(){\n            dispatch(actionCreators.mouseEnter())\n        },\n        handleMouseLeave(){\n            dispatch(actionCreators.mouseLeave())\n        },\n        handleChangePage(page, totalPage, spin){\n            let originAngle = spin.style.transform.replace(/[^0-9]/ig, '');\n            if (originAngle){\n                originAngle = parseInt(originAngle)\n            }else{\n                originAngle = 0\n            }\n            spin.style.transform = 'ratate(' + (originAngle+360) + 'deg)';\n            if (page < totalPage){\n                dispatch(actionCreators.changePageList(page + 1))\n            }else{\n                dispatch(actionCreators.changePageList(1))\n            }\n        },\n        logout(){\n            dispatch(loginActionCreators.logout())\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);"]},"metadata":{},"sourceType":"module"}